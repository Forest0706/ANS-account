<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>物流財務台帳管理システム</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- ヘッダーナビゲーション -->
        <header class="header">
            <div class="header-content">
                <h1 class="logo">
                    <i class="fas fa-truck"></i>
                    物流財務台帳管理システム
                </h1>
                <nav class="main-nav">
                    <ul class="nav-list">
                        <li><a href="#" data-page="dashboard" class="nav-link active">
                            <i class="fas fa-tachometer-alt"></i> ダッシュボード
                        </a></li>
                        <li><a href="#" data-page="customers" class="nav-link">
                            <i class="fas fa-users"></i> 取引先管理
                        </a></li>
                        <li><a href="#" data-page="expense-items" class="nav-link">
                            <i class="fas fa-list"></i> 費用項目管理
                        </a></li>
                        <li><a href="#" data-page="payment-terms" class="nav-link">
                            <i class="fas fa-calendar-alt"></i> 支払条件管理
                        </a></li>
                        <li><a href="#" data-page="ledger" class="nav-link">
                            <i class="fas fa-book"></i> 台帳管理
                        </a></li>
                        <li><a href="#" data-page="reports" class="nav-link">
                            <i class="fas fa-chart-bar"></i> 帳票出力
                        </a></li>
                    </ul>
                </nav>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="backup-btn">
                        <i class="fas fa-download"></i> バックアップ
                    </button>
                    <button class="btn btn-secondary" id="restore-btn">
                        <i class="fas fa-upload"></i> リストア
                    </button>
                    <input type="file" id="restore-file" accept=".json" style="display: none;">
                </div>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 仪表盘页面 -->
            <div id="dashboard-page" class="page active">
                <div class="page-header">
                    <h2>ダッシュボード</h2>
                    <p>システム概要と簡易統計</p>
                </div>
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="customer-count">0</h3>
                            <p>取引先数</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-list"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="expense-count">0</h3>
                            <p>費用項目数</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="payment-terms-count">0</h3>
                            <p>支払条件数</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="ledger-count">0</h3>
                            <p>台帳記録数</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 往来单位管理页面 -->
            <div id="customers-page" class="page">
                <div class="page-header">
                    <h2>取引先管理</h2>
                    <div class="page-actions">
                        <button class="btn btn-primary" id="add-customer-btn">
                            <i class="fas fa-plus"></i> 取引先新規作成
                        </button>
                        <div class="search-box">
                            <input type="text" id="customer-search" placeholder="取引先を検索...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table id="customers-table" class="data-table">
                        <thead>
                            <tr>
                                <th data-sort="code">コード <i class="fas fa-sort"></i></th>
                                <th data-sort="name">名称 <i class="fas fa-sort"></i></th>
                                <th data-sort="type">区分 <i class="fas fa-sort"></i></th>
                                <th>連絡先</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="customers-tbody">
                            <!-- 动态生成 -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 费用项目管理页面 -->
            <div id="expense-items-page" class="page">
                <div class="page-header">
                    <h2>費用項目管理</h2>
                    <div class="page-actions">
                        <button class="btn btn-primary" id="add-expense-item-btn">
                            <i class="fas fa-plus"></i> 費用項目新規作成
                        </button>
                        <div class="search-box">
                            <input type="text" id="expense-item-search" placeholder="費用項目を検索...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table id="expense-items-table" class="data-table">
                        <thead>
                            <tr>
                                <th data-sort="code">コード <i class="fas fa-sort"></i></th>
                                <th data-sort="name">名称 <i class="fas fa-sort"></i></th>
                                <th>税区分</th>
                                <th>対応通貨</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="expense-items-tbody">
                            <!-- 动态生成 -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 支付条件管理页面 -->
            <div id="payment-terms-page" class="page">
                <div class="page-header">
                    <h2>支払条件管理</h2>
                    <div class="page-actions">
                        <button class="btn btn-primary" id="add-payment-term-btn">
                            <i class="fas fa-plus"></i> 支払条件新規作成
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="payment-terms-table" class="data-table">
                        <thead>
                            <tr>
                                <th data-sort="code">コード <i class="fas fa-sort"></i></th>
                                <th data-sort="name">名称 <i class="fas fa-sort"></i></th>
                                <th>支払日数</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="payment-terms-tbody">
                            <!-- 动态生成 -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 台账管理页面 -->
            <div id="ledger-page" class="page">
                <div class="page-header">
                    <h2>台账管理</h2>
                    <div class="page-actions">
                        <button class="btn btn-primary" id="add-ledger-entry-btn">
                            <i class="fas fa-plus"></i> 台帳記録新規作成
                        </button>
                        <button class="btn btn-secondary" id="export-pdf-btn">
                            <i class="fas fa-file-pdf"></i> PDF出力
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="ledger-table" class="data-table">
                        <thead>
                            <tr>
                                <th data-sort="date">日付 <i class="fas fa-sort"></i></th>
                                <th data-sort="customer">取引先 <i class="fas fa-sort"></i></th>
                                <th data-sort="expense-item">費用項目 <i class="fas fa-sort"></i></th>
                                <th>金額</th>
                                <th>状態</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="ledger-tbody">
                            <!-- 动态生成 -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 报表输出页面 -->
            <div id="reports-page" class="page">
                <div class="page-header">
                    <h2>帳票出力</h2>
                    <p>各種財務帳票の生成</p>
                </div>
                <div class="reports-grid">
                    <div class="report-card">
                        <h3>月次収支帳票</h3>
                        <p>月別の収支状況を集計</p>
                        <button class="btn btn-primary">帳票を生成</button>
                    </div>
                    <div class="report-card">
                        <h3>取引先別対帳表</h3>
                        <p>取引先別に取引記録を集計</p>
                        <button class="btn btn-primary">帳票を生成</button>
                    </div>
                    <div class="report-card">
                        <h3>費用項目分析</h3>
                        <p>費用項目別に分類集計</p>
                        <button class="btn btn-primary">帳票を生成</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 読み込み状態 -->
    <div id="loading" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>読み込み中...</p>
        </div>
    </div>

    <!-- モーダルコンテナ -->
    <div id="modal-container"></div>

    <!-- JavaScript模块 -->
    <script src="src/utils/storage.js"></script>
    <script src="src/utils/helpers.js"></script>
    <script src="src/components/base.js"></script>
    <script src="src/modules/customers.js"></script>
    <script src="src/modules/expense-items.js"></script>
    <script src="src/modules/payment-terms.js"></script>
    <script src="src/modules/ledger.js"></script>
    <script src="src/modules/dashboard.js"></script>
    <script src="src/app.js"></script>

    <!-- 自动化测试脚本 -->
    <script src="scripts/tests/phase1.js"></script>
</body>
</html>